# Тестирование программы анализатора файлов
# Файл создан для демонстрации работы с бинарными данными

# Сначала создадим бинарный тестовый файл using Python:
echo "Создаем тестовый бинарный файл..."
python3 -c "
data = [
    0x02, 0x04, 0x06, 0x08,    # Word 1: содержит простой байт 0x02
    0x09, 0x0B, 0x0D, 0x10,    # Word 2: содержит простые байты 0x0B, 0x0D  
    0x11, 0x13, 0x15, 0x17,    # Word 3: содержит простые байты 0x11, 0x13, 0x17
    0x01, 0x03, 0x05, 0x07     # Word 4: все байты простые (3, 5, 7)
]
with open('test_data.bin', 'wb') as f:
    f.write(bytes(data))
print('Файл test_data.bin создан (16 байт)')
print('HEX содержимое:', bytes(data).hex())
"

echo ""
echo "=== ТЕСТИРОВАНИЕ ПРОГРАММЫ ==="

# Компилируем программу
echo "1. Компиляция программы..."
gcc -o analyzer analyzer.c

echo ""
echo "2. Тест режима xor8 (XOR всех байтов):"
./analyzer test_data.bin xor8
echo "Ожидание: результат XOR всех 16 байтов файла"

echo ""
echo "3. Тест режима xorodd (XOR слов с простыми байтами):"
./analyzer test_data.bin xorodd
echo "Ожидание: результат XOR четырех 4-байтовых слов"
echo "Расчет: 0x08060402 XOR 0x100D0B09 XOR 0x17151311 XOR 0x07050301"

echo ""
echo "4. Тест режима mask с маской 0x03:"
./analyzer test_data.bin mask 3
echo "Ожидание: 0 (ни одно слово не имеет два младших бита = 11)"

echo ""
echo "5. Тест режима mask с маской 0x01:"
./analyzer test_data.bin mask 1
echo "Ожидание: 3 (три слова имеют установленный младший бит)"

echo ""
echo "6. Тест режима mask с маской 0xFF (все биты):"
./analyzer test_data.bin mask FF
echo "Ожидание: 0 (ни один байт не имеет все биты установленными)"

echo ""
echo "Тестирование завершено!"